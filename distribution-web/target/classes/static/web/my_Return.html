<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>退货管理</title>
<link rel="Stylesheet" href="css/style.css" type="text/css" />
<link rel="Stylesheet" href="css/public/font-awesome.min.css" type="text/css" />
<link rel="Stylesheet" href="css/user.css" type="text/css" />
<!-- jQuery -->
<script type="text/javascript" src="js/public/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="js/public/bootstrap.min.js"></script>
<script type="text/javascript" src="js/public/layer/layer.js"></script>
<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript" src="js/yxMobileSlider.js"></script>
</head>

<body class="wrap_bg none">

<div id="container" class="thewidth100">

<!--header-->
    <div class="header_bg clearfix thewidth100 hei"> 
        <div class="header">
        <div class="f_l" onclick="Return()"><i class="icon-angle-left"></i><span>返回</span></div>
        <div class="title">退货管理</div>
        <div class="f_r"><i class="ion_you"></i></div>
        </div>
    </div>
<!--------------------------------------[ header ]-------------------------------------->

<!--------------------------------------[ banner ]-------------------------------------->
<!--wrap-->
    <div class=" thewidth100 pa_b8">
        
        <!-- <div class="order_li ">
            <a href="return_progress.html">
                <h5>订单号：HSLBG20160523 <span class="f_r red">退货申请中</span></h5>
                <div class="order_lib mui-flex">
                    <div class="call lil">
                        <img class="lis_bo1" src="images/shangping.jpg">
                    </div>
                    <div class="call lir">
                        <div class="title">古井贡酒老玻贡50度750ml*6瓶大瓶自饮酒</div>
                        <div class="stage">
                            <span class="red">￥89.00</span>
                            <span class="ma_l2">x2</span>
                            <span class="f_r red">共计：￥178.00</span>
                        </div>
                        <div class="c_999">下单时间：2016.05.23</div>
                    </div>
                </div>
            </a>
            <div class="clearfix row">
                <a href="order_details1.html">订单详情</a>
            </div>
        </div>

        <div class="order_li ">
            <a href="return_progress1.html">
                <h5>订单号：HSLBG20160523 <span class="f_r red">退货审核未通过</span></h5>
                <div class="order_lib mui-flex">
                    <div class="call lil">
                        <img class="lis_bo1" src="images/shangping.jpg">
                    </div>
                    <div class="call lir">
                        <div class="title">古井贡酒老玻贡50度750ml*6瓶大瓶自饮酒</div>
                        <div class="stage">
                            <span class="red">￥89.00</span>
                            <span class="ma_l2">x2</span>
                            <span class="f_r red">共计：￥178.00</span>
                        </div>
                        <div class="c_999">下单时间：2016.05.23</div>
                    </div>
                </div>
            </a>
            <div class="clearfix row">
                <a href="javascript:;" class="current">重新申请</a>
                <a href="javascript:;">订单详情</a>
            </div>
        </div>

        <div class="order_li ">
            <a href="return_progress2.html">
                <h5>订单号：HSLBG20160523 <span class="f_r red">退货审核中</span></h5>
                <div class="order_lib mui-flex">
                    <div class="call lil">
                        <img class="lis_bo1" src="images/shangping.jpg">
                    </div>
                    <div class="call lir">
                        <div class="title">古井贡酒老玻贡50度750ml*6瓶大瓶自饮酒</div>
                        <div class="stage">
                            <span class="red">￥89.00</span>
                            <span class="ma_l2">x2</span>
                            <span class="f_r red">共计：￥178.00</span>
                        </div>
                        <div class="c_999">下单时间：2016.05.23</div>
                    </div>
                </div>
            </a>
            <div class="clearfix row">
                <a href="javascript:;">订单详情</a>
            </div>
        </div>

        <div class="order_li ">
            <a href="return_progress5.html">
                <h5>订单号：HSLBG20160523 <span class="f_r red">退货成功</span></h5>
                <div class="order_lib mui-flex">
                    <div class="call lil">
                        <img class="lis_bo1" src="images/shangping.jpg">
                    </div>
                    <div class="call lir">
                        <div class="title">古井贡酒老玻贡50度750ml*6瓶大瓶自饮酒</div>
                        <div class="stage">
                            <span class="red">￥89.00</span>
                            <span class="ma_l2">x2</span>
                            <span class="f_r red">共计：￥178.00</span>
                        </div>
                        <div class="c_999">下单时间：2016.05.23</div>
                    </div>
                </div>
            </a>
            <div class="clearfix row">
                <a href="javascrimyorpt:;">订单详情</a>
            </div>
        </div>

        <div class="order_li ">
            <a href="return_progress3.html">
                <h5>订单号：HSLBG20160523 <span class="f_r red">退货审核成功</span></h5>
                <div class="order_lib mui-flex">
                    <div class="call lil">
                        <img class="lis_bo1" src="images/shangping.jpg">
                    </div>
                    <div class="call lir">
                        <div class="title">古井贡酒老玻贡50度750ml*6瓶大瓶自饮酒</div>
                        <div class="stage">
                            <span class="red">￥89.00</span>
                            <span class="ma_l2">x2</span>
                            <span class="f_r red">共计：￥178.00</span>
                        </div>
                        <div class="c_999">下单时间：2016.05.23</div>
                    </div>
                </div>
            </a>
            <div class="clearfix row">
                <a href="javascript:;" class="current">填写物流单号</a>
                <a href="javascript:;">订单详情</a>
            </div>
        </div>

    </div> -->
<!--/wrap-->
</div>
<script type="text/javascript">
    // fake
    var userId = 2;
    $(function(){
        // 获取退货订单
        userId = base64encode('{"userId":'+userId+'}');
        AJAXPost = new Ajax('',{
            url: '/order/getOrderReturn',
            param:userId,
            type:'post',
            callback : function(res) {
                /* res要求传送orderNo */
                var orders = res.data;
                console.log('请求成功');
                console.log(res);
                /* data是一个对象数组 */
                $.each(orders,function(i,order){
                    var addTime = order.applyTime;/* 创建订单时间 */
                    var amount = order.returnMoney;
                    var status = order.status;/* 订单状态 */
                    // var payStatus = order.payStatus;
                    // var shippingStatus = order.shippingStatus;
                    var orderNo = order.orderNo;
                    var orderdetail = order.orderReturnDetail;/* item数组 */
                    
                    var price;
                    var quantity;
                    var item_name;/* 商品名称 */
                    var item_img;/* 商品图片 */

                    /* 开始插入orderitem */
                    var item = $('<div>');
                    $(item).addClass('order_li');
                    $(item).appendTo($('.thewidth100'));
                    
                    var a = $('<a>');
                    // $(a).attr('href','order_details1.html?orderNo='+orderNo);
                    $(a).appendTo($(item));
                    
                    var bo = $('<div>');
                    $(bo).addClass('clearfix row');
                    $(bo).appendTo($(item));
                    
                    var title = $('<h5>');
                    $(title).appendTo($(a));
                    
                    var on = $('<span>');
                    $(on).text('订单号：'+orderNo);
                    $(on).appendTo($(title));
                    
                    var st = $('<span>');
                    $(st).addClass('f_r red');
                    
                    var btn1 = $('<a>');
                    $(btn1).addClass('current');
                    
                    var btn2 = $('<a>');
                    console.log(status);

                    var item_amount = $('<span>');
                    $(item_amount).addClass('f_l red amount');
                    $(item_amount).text('共计：￥'+amount);
                    $(item_amount).appendTo($(bo));
                    //  orderReturn--json数组
                    // "status":" int 0:用户取消    1:待审核  2：审核通过   4：拒绝   5:买家已退货 6:商户确认收到用户回寄货物  7：卖家已换货 8:已退款  9::用户收到货物，订单完成", 
                    switch(status)
                    {   
                        case 0:
                            /* 用户取消 */
                          $(st).text('已取消');

                          $(btn2).addClass('none');

                          break;
                        case 1:
                            /* 退货申请中 */
                          $(st).text('退货申请中');

                          $(a).attr('href','return_progress2.html?orderNo='+orderNo)
                          // $(item).addClass('1')

                            
                          $(btn2).text('订单详情');
                          $(btn2).attr('href','return_progress2.html?orderNo='+orderNo);
                          break;
                        case 2:
                        /* 2：审核通过 */
                        $(st).text('退货申请成功');

                        $(a).attr('href','return_progress3.html?orderNo='+orderNo)
                        // $(item).addClass('2')


                        $(btn1).text('填写物流单号');
                        $(btn1).attr('href','return_progress3.html?orderNo='+orderNo);
                        $(btn1).appendTo($(bo));
                            
                        $(btn2).text('订单详情');
                        $(btn2).attr('href','return_progress3.html?orderNo='+orderNo);
                          break;   
                        case 4:
                          /* 审核未通过 */
                          $(st).text('退货审核未通过');

                          $(a).attr('href','return_progress1.html?orderNo='+orderNo)
                          // $(item).addClass('3')
                          
                          $(btn1).text('重新申请');
                          $(btn1).attr('href','return_progress1.html?orderNo='+orderNo);
                          $(btn1).appendTo($(bo));

                          $(btn2).text('订单详情');
                          $(btn2).attr('href','return_progress1.html?orderNo='+orderNo);
                          break;
                          case 5:
                            /* 用户取消 */
                          $(st).text('待退款');

                          $(a).attr('href','return_progress5.html?orderNo='+orderNo)
                          // $(item).addClass('4')
                            
                          $(btn2).text('订单详情');
                          $(btn2).attr('href','return_progress5.html?orderNo='+orderNo);
                          break;
                          case 6:
                            /* 用户取消 */
                          $(st).text('待退款');

                          $(a).attr('href','return_progress5.html?orderNo='+orderNo)
                          // $(item).addClass('4')
                            
                          $(btn2).text('订单详情');
                          $(btn2).attr('href','return_progress5.html?orderNo='+orderNo);
                          break;
                          case 7:
                            /* 用户取消 */
                          $(st).text('待退款');

                          $(a).attr('href','return_progress5.html?orderNo='+orderNo)
                          // $(item).addClass('4')
                            
                          $(btn2).text('订单详情');
                          $(btn2).attr('href','return_progress5.html?orderNo='+orderNo);
                          break;
                        case 8:
                          /* 退货成功 */
                          $(st).text('退货成功');

                          $(a).attr('href','return_progress5.html?orderNo='+orderNo)
                          // $(item).addClass('4')
                            
                          $(btn2).text('订单详情');
                          $(btn2).attr('href','return_progress5.html?orderNo='+orderNo);
                          break;
                          case 9:
                          /* 退货成功 */
                          $(st).text('退货成功');

                          $(a).attr('href','return_progress5.html?orderNo='+orderNo)
                          // $(item).addClass('4')
                            
                          $(btn2).text('订单详情');
                          $(btn2).attr('href','return_progress5.html?orderNo='+orderNo);
                          break;  
                        default:
                          console.log('order_status error!');
                    }
                    /* 统一插入 */
                    $(st).appendTo($(title));
                    $(btn2).appendTo($(bo));
                    
                    $.each(orderdetail,function(index,item){
                        /* 开始插入商品 */
                        price = item.price;
                        quantity = item.price;
                        /* fake */
                        item_name = '老白干';
                        item_img = 'images/shangping.jpg';
                        
                        var item_box = $('<div>');
                        $(item_box).addClass('order_lib mui-flex');
                        $(item_box).appendTo($(a));
                        
                        var img_box = $('<div>');
                        $(img_box).addClass('call lil');
                        $(img_box).appendTo($(item_box));
                        
                        var img = $('<img>');
                        $(img).addClass('lis_bo1');
                        $(img).attr('src',item_img);
                        $(img).appendTo($(img_box));
                        
                        var item_detail = $('<div>');
                        $(item_detail).addClass('call lir');
                        $(item_detail).appendTo($(item_box));
                        
                        var item_title = $('<div>');
                        $(item_title).addClass('title');
                        $(item_title).text(item_name);
                        $(item_title).appendTo($(item_detail));
                        
                        var item_pr_qu = $('<div>');
                        $(item_pr_qu).addClass('stage');
                        $(item_pr_qu).appendTo($(item_detail));
                        
                        var item_price = $('<span>');
                        $(item_price).addClass('red');
                        $(item_price).text('￥'+price);
                        $(item_price).appendTo($(item_pr_qu));
                        
                        var item_quantity = $('<span>');
                        $(item_quantity).addClass('ma_l2');
                        $(item_quantity).text('x'+quantity);
                        $(item_quantity).appendTo($(item_pr_qu));
                        
                        var item_date = $('<div>');
                        $(item_date).addClass('c_999');
                        $(item_date).text('下单时间：'+addTime);
                        $(item_date).appendTo($(item_detail));
                    })
                      
                })
                $('body').show();
            }
        });
    })
</script>
</body>
</html>